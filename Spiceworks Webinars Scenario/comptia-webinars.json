{
  "schema_version": 1,
  "name": "CompTIA Webinars",
  "description": "No description provided",
  "source_url": false,
  "guid": "3b662f4b894034e1c5583a0aaf0e477c",
  "tag_fg_color": "#ffffff",
  "tag_bg_color": "#5bc0de",
  "icon": "gear",
  "exported_at": "2020-04-03T17:47:22Z",
  "agents": [
    {
      "type": "Agents::DataOutputAgent",
      "name": "CompTIA Webinar RSS Output",
      "disabled": false,
      "guid": "054a5995a4fc89d80aaf6c43a4d86e26",
      "options": {
        "secrets": [
          "rssfeed"
        ],
        "expected_receive_period_in_days": 2,
        "template": {
          "title": "CompTIA New Webinars as a feed",
          "description": "This is a feed of recently added CompTIA Webinars, generated by Huginn",
          "item": {
            "title": "{{title}} | {{ timestamp | date: \"%Y-%m-%d %H:%M\" }}",
            "description": "{{body}}",
            "link": "{{url}}",
            "pubDate": "{{timestamp }}",
            "id": "{{url}}"
          },
          "link": "https://www.comptia.org/events/webinars"
        },
        "ns_media": "true"
      },
      "propagate_immediately": true
    },
    {
      "type": "Agents::WebsiteAgent",
      "name": "CompTIA Webinars Event Fetcher",
      "disabled": false,
      "guid": "1e37ab346bad9fbbef768758a6f3abde",
      "options": {
        "expected_update_period_in_days": "2",
        "url": "https://www.comptia.org/events/webinars",
        "type": "html",
        "mode": "on_change",
        "extract": {
          "url": {
            "css": "#accordionWebinar > div > div.accordion-content > div > a:nth-child(3)",
            "value": "@href"
          }
        },
        "template": {
          "timestamp": "{{timestamp | strip_newlines  | date: \"%Y-%m-%d %H:%M\" }}"
        }
      },
      "schedule": "every_1h",
      "keep_events_for": 0,
      "propagate_immediately": false
    },
    {
      "type": "Agents::JavaScriptAgent",
      "name": "CompTIA Webinar GCal Paylod Formatter",
      "disabled": false,
      "guid": "3bf83860424856fbdb9cbece66bc1ce4",
      "options": {
        "language": "JavaScript",
        "code": "function ISODateString(d){\r\n function pad(n){return n<10 ? '0'+n : n}\r\n return d.getUTCFullYear()+'-'\r\n      + pad(d.getUTCMonth())+'-'\r\n      + pad(d.getUTCDate())+'T'\r\n      + pad(d.getUTCHours())+':'\r\n      + pad(d.getUTCMinutes())+':'\r\n      + pad(d.getUTCSeconds())+'Z'}\r\n\r\nAgent.receive = function() { \r\n   var events = this.incomingEvents();\r\n   for(var i = 0; i < events.length; i++) {\r\n    var body = events[i].payload['body']\r\n    var summary = events[i].payload['title']\r\n    var germanDate = body.match(/\\w+, (\\d+). (\\w+) (\\d+)/)\r\n    var year = events[i].payload['year']\r\n    var month = events[i].payload['month']\r\n    var day = events[i].payload['day']\r\n    var hour_start = events[i].payload['hour_start']\r\n    var hour_end = events[i].payload['hour_end']\r\n    var minute = events[i].payload['minute']\r\n    var startDate = new Date(year, month, day, hour_start, minute, 0, 0)\r\n    var endDate = new Date(year, month, day, hour_end, minute, 0, 0)\r\n    \r\n    this.createEvent(\r\n      { 'message': \r\n        { 'summary': summary,\r\n          'visibility': 'default',\r\n          'description': body,\r\n          'start': {\r\n           'dateTime': ISODateString(startDate)\r\n          },\r\n          'end': {\r\n            'dateTime': ISODateString(endDate)\r\n          }\r\n        }\r\n      }\r\n    );\r\n  }\r\n}",
        "expected_receive_period_in_days": "2",
        "expected_update_period_in_days": "2"
      },
      "schedule": "never",
      "keep_events_for": 0,
      "propagate_immediately": true
    },
    {
      "type": "Agents::GoogleCalendarPublishAgent",
      "name": "CompTIA Google Calendar Post",
      "disabled": false,
      "guid": "4bb5e4f659a2c049c54d100ee8c5b6ed",
      "options": {
        "expected_update_period_in_days": "10",
        "calendar_id": "{% credential comptia_calendar_url%}",
        "google": {
          "service_account_email": "{% credential google_api_service_email %}",
          "key_file": "/home/huginn/huginn-272816-7d1cdb5dd771.json"
        }
      },
      "keep_events_for": 0,
      "propagate_immediately": true
    },
    {
      "type": "Agents::EventFormattingAgent",
      "name": "CompTIA Webinar RFC 3339",
      "disabled": false,
      "guid": "924e9814a8ac137a02ff884d9f2746ab",
      "options": {
        "instructions": {
          "timestamp": "{{ timestamp | date: \"%Y-%m-%d %H:%M\" }}",
          "year": "{{ timestamp | date: \"%Y\" }}",
          "month": "{{ timestamp | date: \"%m\" }}",
          "day": "{{ timestamp | date: \"%d\" }}",
          "hour_start": "{{ timestamp | date: \"%H\" }}",
          "hour_end": "{{ timestamp | date: \"%H\" | plus: 1 }}",
          "minute": "{{ timestamp | date: \"%M\" }}"
        },
        "matchers": [

        ],
        "mode": "merge"
      },
      "keep_events_for": 0,
      "propagate_immediately": true
    },
    {
      "type": "Agents::WebsiteAgent",
      "name": "Comptia Webinar Event Parser",
      "disabled": false,
      "guid": "cc83eb5efc1fb8a11d82b62c5b69a796",
      "options": {
        "expected_update_period_in_days": "2",
        "url": "{{url}}",
        "type": "html",
        "mode": "on_change",
        "extract": {
          "timestamp": {
            "xpath": "/html/body/section[3]/div/div[2]/div[1]/div/p[1]/time",
            "value": "."
          },
          "body": {
            "xpath": "/html/body/section[3]/div/div[2]/div[1]/div/p[2]",
            "value": "."
          },
          "title": {
            "xpath": "/html/body/section[3]/div/div[2]/div[1]/div/h1",
            "value": "string(.)"
          }
        },
        "template": {
          "url": "{{url}}",
          "timestamp": "{{timestamp | date: \"%Y-%m-%d %H:%M\" }}",
          "body": "{{body }}{% line_break %}{% line_break %}{{url}}"
        }
      },
      "schedule": "never",
      "keep_events_for": 0,
      "propagate_immediately": true
    }
  ],
  "links": [
    {
      "source": 1,
      "receiver": 5
    },
    {
      "source": 2,
      "receiver": 3
    },
    {
      "source": 4,
      "receiver": 2
    },
    {
      "source": 5,
      "receiver": 0
    },
    {
      "source": 5,
      "receiver": 4
    }
  ],
  "control_links": [

  ]
}
